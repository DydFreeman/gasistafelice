{% extends "blocks/base/report.html" %}
{% load i18n %}

{% block customstyle %}
.head{font-family: Monospace, Arial;}
.sumQta{width:30%}
.sumPricefield{width:40%; font-size:14px;font-weight:bolder;}
.sumPricevalue{width:30%; color: #006400;font-size:18px;font-weight:bold;}
.empty{text-align:center; font-size:1.4em; color:red; font-family: Monospace, Arial; }
.taright{text-align:right;}
.taright th{margin-right:17px; padding-right:17px;}
.tacenter{text-align:center;}
.tbl{width:96%; padding:3px 3px 0px 3px; marging:3px 3px 0px 3px; font-size:12px; vertical-align middle;}
.Prod{border-bottom: solid 2px #C6D7DE; font-weight: bold; font-size: 14px;}
.totProd{border: solid 2px #344960; font-size:14px; text-align: right;}
.alert{color:red;}
.uprice{width: 15%; border: solid 1px #C6D7DE;}
.qta{width: 10%; border: solid 1px #C6D7DE;}
.totprice{width: 20%; color:darkgray;border: solid 1px #C6D7DE;}
.product{border: solid 1px #C6D7DE;}
.tab{width: 5%;}
{%endblock%}


{%block page_header%}
   <div class="head">
        <h1>{% trans "Order" %}:  {{ order.id }} - {{ order }}</h1>
        <h2>{% trans "StampBy" %} {{ user.userprofile }} {% now "l d F Y H:i" %} </h2>
        <table style="width:96%; ">
            <tr>
                <td style="sumQta"><h2>{% trans "OrderedProducts" %} {{ rec_count }}</h2></td>
                <td class="sumPricefield taright">{% trans "Total cost" %}</td>
                {% if total_calc == total_amount%}
                    <td class="sumPricevalue taright">&euro; {{total_amount|floatformat:"2"}}</td>
                {% else %}
                    <td class="sumPricevalue taright alert">&euro; {{total_amount|floatformat:"2"}}   /  calc:{{total_calc|floatformat:"2"}}</td>
                {% endif %}        
            </tr>
        </table>
   </div>
<hr />
{%endblock%}

{%block content%}
<table class="tbl" border="0" cellpadding="1" cellspacing="1">
<tbody>
    {% for row in recFam %}
        
        {% if row.tot_price > 0  %}
            <tr>
                <td class="product">{{row.product|truncatewords:"200"}}</td>
                {% if row.price_changed %}
                    <td class="taright alert uprice">&euro; {{row.price_ordered}} --> {{row.price_delivered}}</td>
                {% else %}
                    <td class="taright uprice">&euro; {{row.price_delivered}}</td>
                {% endif %}
                <td class="taright qta">{{row.amount|floatformat:"-2"}}</td>
                <td class="taright totprice">&euro; {{row.tot_price}}</td>
                <td style="background-color: #D7ECC7;"> {{ row.gasmember }} </td>
            </tr>

        {%  endif %}

    {%  endfor %}
</tbody>
</table>

<hr />

<table class="tbl" border="0" cellpadding="1" cellspacing="1">
<thead>
    <th>Prodotto</th>
    <th>Prezzo Un</th>
    <th>NÂ° gassisti</th>
    <th>Quantit&agrave;</th>
    <th>Prezzo totale</th>
</thead>
<tbody>
    {% for row in recProd %}
        
        {% if row.tot_price > 0  %}
            <tr>
                <td class="product"> {{ row.product }} </td>
                <td class="taright uprice">{{row.price|floatformat:"2"}}</td>
                <td class="taright qta">{{row.tot_gasmembers}}</td>
                <td class="taright qta">{{row.tot_amount|floatformat:"-2"}}</td>
                <td class="taright totprice">{{row.tot_price|floatformat:"2"}}</td>
            </tr>

        {%  endif %}

    {%  endfor %}
    <tr>
        <td>TOTALE ORDINE</td>
        <td> </td>
        <td>{{ total_amount }}</td>
    </tr>
</tbody>
</table>
{%endblock%}

{%block page_foot%}
<pdf:pagenumber>
{%endblock%}


